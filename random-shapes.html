<!DOCTYPE html>
<html>
<head>
    	<meta charset="utf-8">
        <title>Random Line Generator</title>
</head>
<body>
    <div>
        <canvas id="canvas" style="border:2px solid black;" width="600" height="300">
    </div>
    <select id="user_choice">
        <option value ="0" selected>Draw some lines</option>
        <option value ="1" >Draw some circles</option>
        <option value ="2" >Draw some rectangles</option>
    </select>
    <button id="start_button">Start</button>
    <button id="end_button">Stop</button>
    <button id="clear_button">Clear</button>
</body>
<script>

(function () {

    var run = false;

    document.getElementById("start_button").addEventListener("click", start_shapes);
    document.getElementById("end_button").addEventListener("click", stop_shapes);
    document.getElementById("clear_button").addEventListener("click", clear_canvas);

    var run = false;
    var interval;

    function start_shapes(){
        if(!run){ //this prevents changes to the interval when draw is running
            run = true;
            interval = setInterval(draw,250);
        }
    }

    function stop_shapes(){
        run = false;
        clearInterval(interval);
    }

    function draw(){
        var select = document.getElementById("user_choice");
        var type_of_shape = select.options[select.selectedIndex].value;

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext("2d");
        ctx.beginPath();
        if(type_of_shape == 0){ //lines
            ctx.strokeStyle = random_color();
            ctx.moveTo(random_num(600),random_num(300));
            ctx.lineTo(random_num(600),random_num(300));
            ctx.stroke();
        } else if(type_of_shape == 1){ //rectangles
            ctx.fillStyle = random_color();
            ctx.arc(random_num(600),random_num(300), random_num(100), 0, 2 * Math.PI, false);
            ctx.fill();
        } else if(type_of_shape == 2){ //circles
            ctx.fillStyle = random_color();
            ctx.rect(random_num(600),random_num(300),random_num(100),random_num(100));
            ctx.fill();
        }
    }

    function random_num(interval){
        return Math.floor(Math.random() * (interval));
    }

    function random_color(){
        return "#000000".replace(/0/g,function(){
            return (~~(Math.random()*16)).toString(16);
        });
    }

    function clear_canvas(){
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, 600, 300);
    }

})();

</script>
</html>
